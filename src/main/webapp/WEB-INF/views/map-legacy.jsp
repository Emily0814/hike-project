<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>    
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
	<link rel="stylesheet" href="http://bit.ly/3WJ5ilK">
	<style>
		#map {
			width: 770px;
			height: 400px;
		}
	</style>
</head>
<body>
	<!-- map.jsp -->
	<h1>Kakao Map <small>GPX 데이터 출력하기</small></h1>
	
	<div>
		<div id="map"></div>
	</div>
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.14.0/proj4.js"></script>
	<script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=d8de9ed5ee23a0becf5c950f18bbddf4"></script>
	<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
	<script src="https://bit.ly/4cMuheh"></script>
	<script>
		
		var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
		var options = { //지도를 생성할 때 필요한 기본 옵션
			center: new kakao.maps.LatLng(37.659086, 126.978270), //지도의 중심좌표.
			level: 6 //지도의 레벨(확대, 축소 정도)
		};
	
		var map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴
		
		/* 
		// 각 좌표계 정의
		const epsg4326 = 'EPSG:4326';
  		const epsg5181 = '+proj=tmerc +lat_0=38.0 +lon_0=127.0 +k=0.9999 +x_0=400000 +y_0=600000 +ellps=bessel +towgs84=0,0,0,0,0,0,0 +units=m +no_defs';
  		 */
  		// EPSG:4326 좌표가 담긴 브이월드 등산로 API 등산로 좌표데이터
		const coords4326 = [
			[126.960151221005, 37.6287305560258],
            [126.960198464306, 37.6286938495687],
            [126.960246595314, 37.628660011231],
            [126.960295612902, 37.6286290392096],
            [126.960345515941, 37.6286009344039],
            [126.960396306701, 37.6285756977146],
            [126.960447984055, 37.6285533282393],
            [126.960500548007, 37.6285338259768],
            [126.960553997431, 37.6285171909256],
            [126.960587049043, 37.6285088840638],
            [126.96062146938, 37.6285022264546],
            [126.960694681354, 37.6284938077216],
            [126.960774268937, 37.6284918538383],
            [126.960861539464, 37.6284963291861],
            [126.960944203746, 37.6285053772527],
            [126.961037525365, 37.6285196220668],
            [126.961404027047, 37.6285886391476],
            [126.961548991727, 37.6286160620474],
            [126.96170897747, 37.6286533608515],
            [126.961853394316, 37.6286914301555],
            [126.962253986313, 37.6288024145463],
            [126.96233166698, 37.6288241477362],
            [126.962416749648, 37.628850495382],
            [126.962783760862, 37.6289758118742],
            [126.962870274004, 37.6290034561629],
            [126.962948057644, 37.6290262070934],
            [126.963038675162, 37.629049384556],
            [126.963123674233, 37.6290671101267],
            [126.96320478452, 37.6290797411479],
            [126.9632828771, 37.6290874076406],
            [126.963342316722, 37.6290893947772],
            [126.963404827147, 37.6290874851694],
            [126.963471076755, 37.6290816609996],
            [126.963542392154, 37.629071810048],
            [126.963673600751, 37.6290466958785],
            [126.963977612437, 37.6289777275784],
            [126.964053061323, 37.6289633951727],
            [126.964121205977, 37.6289529527589],
            [126.964184886663, 37.6289459813523],
            [126.964244891879, 37.6289424226349],
            [126.964302020314, 37.6289422291017],
            [126.964356721715, 37.6289454026947],
            [126.964471562021, 37.6289568825592],
            [126.964568441856, 37.6289690849171],
            [126.964655675817, 37.6289830619524],
            [126.964734521253, 37.6289990555268],
            [126.964807006863, 37.6290175582007],
            [126.964872404273, 37.6290384769674],
            [126.964931026101, 37.62906191104],
            [126.964983022986, 37.6290879244432],
            [126.965018013106, 37.629110091878],
            [126.965051342794, 37.6291364456939],
            [126.965083357449, 37.6291672526865],
            [126.96511465835, 37.6292030887649],
            [126.965140822461, 37.6292375060658],
            [126.965168184796, 37.629277544968],
            [126.965259601536, 37.6294257796592],
            [126.965298167457, 37.6294839109296],
            [126.965341558048, 37.6295400875628],
            [126.965385457487, 37.6295862120252],
            [126.965441799821, 37.6296357881903],
            [126.965504306259, 37.6296850480822],
            [126.965573638157, 37.629734519862],
            [126.965651194152, 37.6297852040196],
            [126.965782009272, 37.6298634052864],
            [126.966096975996, 37.630038760548],
            [126.966235294654, 37.6301202106189],
            [126.966292466234, 37.6301569079145],
            [126.966355340123, 37.6301999479489],
            [126.96661443716, 37.6303865482023],
            [126.96672430138, 37.6304583166538],
            [126.966795308537, 37.6304990657354],
            [126.966863402769, 37.6305330421443],
            [126.966929960189, 37.630560926516],
            [126.966995692095, 37.6305830109714],
            [126.967043719618, 37.6305945912554],
            [126.967096475132, 37.6306024688845],
            [126.967154475184, 37.630606725986],
            [126.967218794825, 37.6306074448404],
            [126.967276787434, 37.630605448135],
            [126.967342545795, 37.6306010551259],
            [126.967635966841, 37.6305741307168],
            [126.967708528707, 37.6305708313647],
            [126.967771542284, 37.6305711756511],
            [126.967833817608, 37.6305758984952],
            [126.967888777098, 37.6305853161561],
            [126.967937347383, 37.6305995910735],
            [126.967979990618, 37.6306188657366],
            [126.968014639053, 37.6306411087683],
            [126.968046902845, 37.6306685633485],
            [126.968077108151, 37.6307014998634],
            [126.968100404623, 37.6307331731221],
            [126.968130088527, 37.6307801432412],
            [126.968154776642, 37.6308267498078],
            [126.968240705789, 37.6310145177405],
            [126.968280695246, 37.6310918655352],
            [126.968304755667, 37.6311311198533],
            [126.968329458114, 37.6311658405769],
            [126.968355257732, 37.6311966666269],
            [126.968382409291, 37.6312238935943],
            [126.968423616551, 37.6312591196674],
            [126.96846968185, 37.6312938776106],
            [126.968521095574, 37.6313285405571],
            [126.968578899685, 37.6313638151505],
            [126.968674428518, 37.6314161914412]
			];
		/* 
  		const coords5181 = coords4326.map(coord => proj4(epsg4326, epsg5181, coord));
  		console.log(coords5181);
  		 */
  		
  		//console.log(coords4326.length); // 105
  		
  		/*
  		const longitudes = coords4326.map(coord => coord[0]);
  		const latitudes = coords4326.map(coord => coord[1]);
  		*/ 
  		
		
		var temp = [];
  		
  		for (var i = 0; i < coords4326.length; i++) {
  			temp.push(new kakao.maps.LatLng(coords4326[i][1], coords4326[i][0]));
  		}
  		
  		
		var polyline = new kakao.maps.Polyline({
			map: map,
			path: temp,
			strokeWeight: 15,
			strokeColor: '#FF2400',
			strokeStyle: 'solid'
		});
  		
		var polylinein = new kakao.maps.Polyline({
			map: map,
			path: temp,
			strokeWeight: 3,
			strokeColor: 'white',
			strokeStyle: 'dash',
			endArrow: 'true'
		});
		
		polyline.setMap(map);
		polylinein.setMap(map);
		polyline.getMap();
		
		
	</script>
</body>
</html>